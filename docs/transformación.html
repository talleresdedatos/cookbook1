<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 6 Transformación | Cookbook de análisis de datos básico</title>
<meta name="author" content="Samuel Calderon">
<meta name="description" content="6.1 Tibbles Hasta el momento hemos trabajado usando tablas que hemos leído desde un paquete descargado o que hemos importado desde un archivo local. Por ejemplo, gapminder. Cuando lo leemos,...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Capítulo 6 Transformación | Cookbook de análisis de datos básico">
<meta property="og:type" content="book">
<meta property="og:description" content="6.1 Tibbles Hasta el momento hemos trabajado usando tablas que hemos leído desde un paquete descargado o que hemos importado desde un archivo local. Por ejemplo, gapminder. Cuando lo leemos,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 6 Transformación | Cookbook de análisis de datos básico">
<meta name="twitter:description" content="6.1 Tibbles Hasta el momento hemos trabajado usando tablas que hemos leído desde un paquete descargado o que hemos importado desde un archivo local. Por ejemplo, gapminder. Cuando lo leemos,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Cookbook de análisis de datos básico</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Presentación</a></li>
<li><a class="" href="conociendo-R.html"><span class="header-section-number">1</span> R y el IDE RStudio</a></li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">2</span> Rmarkdown</a></li>
<li><a class="" href="repaso-de-conceptos-estad%C3%ADsticos.html"><span class="header-section-number">3</span> Repaso de conceptos estadísticos</a></li>
<li><a class="" href="gr%C3%A1ficos.html"><span class="header-section-number">4</span> Gráficos</a></li>
<li><a class="" href="importaci%C3%B3n-de-datos.html"><span class="header-section-number">5</span> Importación de datos</a></li>
<li><a class="active" href="transformaci%C3%B3n.html"><span class="header-section-number">6</span> Transformación</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="transformación" class="section level1" number="6">
<h1>
<span class="header-section-number">Capítulo 6</span> Transformación<a class="anchor" aria-label="anchor" href="#transformaci%C3%B3n"><i class="fas fa-link"></i></a>
</h1>
<div id="tibbles" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Tibbles<a class="anchor" aria-label="anchor" href="#tibbles"><i class="fas fa-link"></i></a>
</h2>
<p>Hasta el momento hemos trabajado usando tablas que hemos leído desde un paquete descargado o que hemos importado desde un archivo local.</p>
<p>Por ejemplo, <code>gapminder</code>.</p>
<p>Cuando lo leemos, obtenemos un <em>tibble</em>.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>

<span class="va">gapminder</span>
<span class="co">#&gt; # A tibble: 1,704 x 6</span>
<span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span>
<span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span>
<span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span>
<span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span>
<span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span>
<span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span>
<span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span>
<span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span>
<span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span>
<span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
<p>Un tibble es una tipo especial de tabla. R muestra un tibble en una manera sencilla: Se mostrarán solo las 10 primeras filas del tibble, así como todas las columnas que quepan en tu ventana de consola o documento R Markdown. R también agrega información útil acerca del tibble, como los tipos de datos de cada columna y el tamaño del conjunto de datos.</p>
<p>Los tibbles son una versión mejorada de los <em>data.frames</em>, la forma en que R trabaja con datos tabulares.</p>
<p>Los tibble son objetos ampliamente utilizados en la actualidad y son parte fundamental del <a href="https://www.tidyverse.org/"><em>tidyverse</em></a>, un conjunto de paquetes que comparten una filosofía en común, con el fin de hacer el análisis de datos más accesible y reproducible.</p>
<p>Esta filosofía es visiblemente respaldada por los desarrolladores de RStudio. Debido a esta popularidad , es bastante probable que cuando veas que alguien está hablando de un data.frame, en realidad se esté refiriendo a un tibble.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> <span class="co"># carga el paquete tibble</span></code></pre></div>
</div>
<div id="visualizar-datos" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Visualizar datos<a class="anchor" aria-label="anchor" href="#visualizar-datos"><i class="fas fa-link"></i></a>
</h2>
<p>Es posible acceder a una ventana de visualización de tablas en el panel de Edición si usamos la función <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> en nuestra sesión de RStudio. Es el mismo panel que aparece cuando hacemos click en el nombre de una tabla en el <em>Environment</em>.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="images/View.png" width="400"></div>
</div>
<div id="el-paquete-dplyr" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> El paquete <code>dplyr</code><a class="anchor" aria-label="anchor" href="#el-paquete-dplyr"><i class="fas fa-link"></i></a>
</h2>
<p>El paquete <code>dplyr</code> nos permite transformar nuestros datos tabulares. Una ventaja de este paquete es que sus funciones utilizan verbos para representar las acciones que queremos realizar en el contexto de nuestro análisis de datos. Por ejemplo:</p>
<ul>
<li>
<strong>Seleccionar</strong> variables por su nombre con <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</li>
<li>
<strong>Filtrar</strong> observaciones de acuerdo a sus valores con <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>.</li>
<li>
<strong>Organizar</strong> las filas de acuerdo a sus valores con <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</li>
<li>
<strong>Modificar</strong> las variables de nuestro conjunto de datos con <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>.</li>
<li>
<strong>Resumir</strong> nuestros datos en valores representativos con <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>.</li>
<li>
<strong>Agrupar</strong> nuestros datos para operar en ellos con <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>.</li>
</ul>
<p>Otra característica de las funciones <em>verbo</em> de <code>dplyr</code> es que su primer argumento será siempre el <em>tibble</em> que queremos transformar. Más adelante, esto permitirá encadenar las funciones con el operador <em>pipe</em>.</p>
<p>Todas las operaciones descritas anteriormente pueden hacerse con funciones de <em>R base</em>, sin embargo no con una interfaz consistente entre funciones y paquetes.</p>
<p>Para poder usar sus funciones, debemos cargar el paquete. Como forma parte de los paquetes del tidyverse, podemos cargar todos juntos a la vez.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Para cargar sólo dplyr</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span></code></pre></div>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Para cargar todo el tidyverse</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co">#&gt; -- Attaching packages ------------------- tidyverse 1.3.1 --</span>
<span class="co">#&gt; v ggplot2 3.3.5     v purrr   0.3.4</span>
<span class="co">#&gt; v tibble  3.1.4     v dplyr   1.0.7</span>
<span class="co">#&gt; v tidyr   1.1.4     v stringr 1.4.0</span>
<span class="co">#&gt; v readr   2.0.2     v forcats 0.5.1</span>
<span class="co">#&gt; -- Conflicts ---------------------- tidyverse_conflicts() --</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></code></pre></div>
</div>
<div id="transformación-de-columnas" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Transformación de columnas<a class="anchor" aria-label="anchor" href="#transformaci%C3%B3n-de-columnas"><i class="fas fa-link"></i></a>
</h2>
<div id="cambiar-nombre-de-una-columna" class="section level3" number="6.4.1">
<h3>
<span class="header-section-number">6.4.1</span> Cambiar nombre de una columna<a class="anchor" aria-label="anchor" href="#cambiar-nombre-de-una-columna"><i class="fas fa-link"></i></a>
</h3>
<p>Usar <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code>.</p>
<p>Esta función nos permite cambiar el nombre de nuestras columnas. Debemos especificar:</p>
<ol style="list-style-type: decimal">
<li>El nombre del conjunto de datos</li>
<li>El cambio de nombre, usando la sintaxis <code>nuevo_nombre = nombre_anterior</code>
</li>
</ol>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>pais <span class="op">=</span> <span class="va">country</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 6</span>
<span class="co">#&gt;    pais        continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span>
<span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span>
<span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span>
<span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span>
<span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span>
<span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span>
<span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span>
<span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span>
<span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span>
<span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
</div>
<div id="cambiar-nombre-de-varias-columnas" class="section level3" number="6.4.2">
<h3>
<span class="header-section-number">6.4.2</span> Cambiar nombre de varias columnas<a class="anchor" aria-label="anchor" href="#cambiar-nombre-de-varias-columnas"><i class="fas fa-link"></i></a>
</h3>
<p>Es posible cambiar más de un nombre a la vez.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>pais <span class="op">=</span> <span class="va">country</span>,
           continente <span class="op">=</span> <span class="va">continent</span>, 
           anio <span class="op">=</span> <span class="va">year</span>,
           exp_de_vida <span class="op">=</span> <span class="va">lifeExp</span>,
           poblacion <span class="op">=</span> <span class="va">pop</span>,
           pbi_per_cap <span class="op">=</span> <span class="va">gdpPercap</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 6</span>
<span class="co">#&gt;    pais        continente  anio exp_de_vida poblacion pbi_per_cap</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;      &lt;int&gt;       &lt;dbl&gt;     &lt;int&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia        1952        28.8   8425333        779.</span>
<span class="co">#&gt;  2 Afghanistan Asia        1957        30.3   9240934        821.</span>
<span class="co">#&gt;  3 Afghanistan Asia        1962        32.0  10267083        853.</span>
<span class="co">#&gt;  4 Afghanistan Asia        1967        34.0  11537966        836.</span>
<span class="co">#&gt;  5 Afghanistan Asia        1972        36.1  13079460        740.</span>
<span class="co">#&gt;  6 Afghanistan Asia        1977        38.4  14880372        786.</span>
<span class="co">#&gt;  7 Afghanistan Asia        1982        39.9  12881816        978.</span>
<span class="co">#&gt;  8 Afghanistan Asia        1987        40.8  13867957        852.</span>
<span class="co">#&gt;  9 Afghanistan Asia        1992        41.7  16317921        649.</span>
<span class="co">#&gt; 10 Afghanistan Asia        1997        41.8  22227415        635.</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
</div>
<div id="cambiar-posición-de-una-columna" class="section level3" number="6.4.3">
<h3>
<span class="header-section-number">6.4.3</span> Cambiar posición de una columna<a class="anchor" aria-label="anchor" href="#cambiar-posici%C3%B3n-de-una-columna"><i class="fas fa-link"></i></a>
</h3>
<p>Usar <code><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate()</a></code>.</p>
<p>Esta función permite cambiar la ubicación de nuestras columnas. Debemos especificar:</p>
<ol style="list-style-type: decimal">
<li>El nombre del conjunto de datos</li>
<li>Los nombres de columna que queremos reubicar</li>
</ol>
<p>Por defecto, pondrá las columnas especificadas como primera columna.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 6</span>
<span class="co">#&gt;    gdpPercap country     continent  year lifeExp      pop</span>
<span class="co">#&gt;        &lt;dbl&gt; &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1      779. Afghanistan Asia       1952    28.8  8425333</span>
<span class="co">#&gt;  2      821. Afghanistan Asia       1957    30.3  9240934</span>
<span class="co">#&gt;  3      853. Afghanistan Asia       1962    32.0 10267083</span>
<span class="co">#&gt;  4      836. Afghanistan Asia       1967    34.0 11537966</span>
<span class="co">#&gt;  5      740. Afghanistan Asia       1972    36.1 13079460</span>
<span class="co">#&gt;  6      786. Afghanistan Asia       1977    38.4 14880372</span>
<span class="co">#&gt;  7      978. Afghanistan Asia       1982    39.9 12881816</span>
<span class="co">#&gt;  8      852. Afghanistan Asia       1987    40.8 13867957</span>
<span class="co">#&gt;  9      649. Afghanistan Asia       1992    41.7 16317921</span>
<span class="co">#&gt; 10      635. Afghanistan Asia       1997    41.8 22227415</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
<hr>
<p>Es posible especificar una posición en especial con los argumentos <code>.before</code> (antes) o <code>.after</code> (después).</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">gdpPercap</span>, .before <span class="op">=</span> <span class="va">year</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 6</span>
<span class="co">#&gt;    country     continent gdpPercap  year lifeExp      pop</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;         &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia           779.  1952    28.8  8425333</span>
<span class="co">#&gt;  2 Afghanistan Asia           821.  1957    30.3  9240934</span>
<span class="co">#&gt;  3 Afghanistan Asia           853.  1962    32.0 10267083</span>
<span class="co">#&gt;  4 Afghanistan Asia           836.  1967    34.0 11537966</span>
<span class="co">#&gt;  5 Afghanistan Asia           740.  1972    36.1 13079460</span>
<span class="co">#&gt;  6 Afghanistan Asia           786.  1977    38.4 14880372</span>
<span class="co">#&gt;  7 Afghanistan Asia           978.  1982    39.9 12881816</span>
<span class="co">#&gt;  8 Afghanistan Asia           852.  1987    40.8 13867957</span>
<span class="co">#&gt;  9 Afghanistan Asia           649.  1992    41.7 16317921</span>
<span class="co">#&gt; 10 Afghanistan Asia           635.  1997    41.8 22227415</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">gdpPercap</span>, .after <span class="op">=</span> <span class="va">year</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 6</span>
<span class="co">#&gt;    country     continent  year gdpPercap lifeExp      pop</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia       1952      779.    28.8  8425333</span>
<span class="co">#&gt;  2 Afghanistan Asia       1957      821.    30.3  9240934</span>
<span class="co">#&gt;  3 Afghanistan Asia       1962      853.    32.0 10267083</span>
<span class="co">#&gt;  4 Afghanistan Asia       1967      836.    34.0 11537966</span>
<span class="co">#&gt;  5 Afghanistan Asia       1972      740.    36.1 13079460</span>
<span class="co">#&gt;  6 Afghanistan Asia       1977      786.    38.4 14880372</span>
<span class="co">#&gt;  7 Afghanistan Asia       1982      978.    39.9 12881816</span>
<span class="co">#&gt;  8 Afghanistan Asia       1987      852.    40.8 13867957</span>
<span class="co">#&gt;  9 Afghanistan Asia       1992      649.    41.7 16317921</span>
<span class="co">#&gt; 10 Afghanistan Asia       1997      635.    41.8 22227415</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
</div>
<div id="seleccionar-columnas" class="section level3" number="6.4.4">
<h3>
<span class="header-section-number">6.4.4</span> Seleccionar columnas<a class="anchor" aria-label="anchor" href="#seleccionar-columnas"><i class="fas fa-link"></i></a>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> nos permite seleccionar columnas específicas de nuestro tibble Supongamos que sólo queremos los nombres de los países, el año y el total de población. Podemos hacerlo con <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p>
<p>Debemos especificar:</p>
<ol style="list-style-type: decimal">
<li>El nombre del conjunto de datos</li>
<li>Las variables a escoger</li>
</ol>
<p>Las columnas escogidas aparecen en el orden especificado.</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">pop</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 3</span>
<span class="co">#&gt;    country      year      pop</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;int&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 Afghanistan  1952  8425333</span>
<span class="co">#&gt;  2 Afghanistan  1957  9240934</span>
<span class="co">#&gt;  3 Afghanistan  1962 10267083</span>
<span class="co">#&gt;  4 Afghanistan  1967 11537966</span>
<span class="co">#&gt;  5 Afghanistan  1972 13079460</span>
<span class="co">#&gt;  6 Afghanistan  1977 14880372</span>
<span class="co">#&gt;  7 Afghanistan  1982 12881816</span>
<span class="co">#&gt;  8 Afghanistan  1987 13867957</span>
<span class="co">#&gt;  9 Afghanistan  1992 16317921</span>
<span class="co">#&gt; 10 Afghanistan  1997 22227415</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
<p>También es posible escoger columnas usando su posición en el conjunto de datos con números.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 3</span>
<span class="co">#&gt;    country      year      pop</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;int&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 Afghanistan  1952  8425333</span>
<span class="co">#&gt;  2 Afghanistan  1957  9240934</span>
<span class="co">#&gt;  3 Afghanistan  1962 10267083</span>
<span class="co">#&gt;  4 Afghanistan  1967 11537966</span>
<span class="co">#&gt;  5 Afghanistan  1972 13079460</span>
<span class="co">#&gt;  6 Afghanistan  1977 14880372</span>
<span class="co">#&gt;  7 Afghanistan  1982 12881816</span>
<span class="co">#&gt;  8 Afghanistan  1987 13867957</span>
<span class="co">#&gt;  9 Afghanistan  1992 16317921</span>
<span class="co">#&gt; 10 Afghanistan  1997 22227415</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
<p>Sin embargo, no recomiendo usar esta manera de selección porque el código es más dificil de interpretar.</p>
</div>
<div id="remover-columnas" class="section level3" number="6.4.5">
<h3>
<span class="header-section-number">6.4.5</span> Remover columnas<a class="anchor" aria-label="anchor" href="#remover-columnas"><i class="fas fa-link"></i></a>
</h3>
<p>Anteponerle el signo negativo al nombre de la columna en <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>. En este ejemplo queremos dejar fuera la columna <code>pop</code> y <code>lifeExp</code>.</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">pop</span>, <span class="op">-</span><span class="va">lifeExp</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 4</span>
<span class="co">#&gt;    country     continent  year gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia       1952      779.</span>
<span class="co">#&gt;  2 Afghanistan Asia       1957      821.</span>
<span class="co">#&gt;  3 Afghanistan Asia       1962      853.</span>
<span class="co">#&gt;  4 Afghanistan Asia       1967      836.</span>
<span class="co">#&gt;  5 Afghanistan Asia       1972      740.</span>
<span class="co">#&gt;  6 Afghanistan Asia       1977      786.</span>
<span class="co">#&gt;  7 Afghanistan Asia       1982      978.</span>
<span class="co">#&gt;  8 Afghanistan Asia       1987      852.</span>
<span class="co">#&gt;  9 Afghanistan Asia       1992      649.</span>
<span class="co">#&gt; 10 Afghanistan Asia       1997      635.</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
</div>
<div id="cambiar-nombres-en-selección" class="section level3" number="6.4.6">
<h3>
<span class="header-section-number">6.4.6</span> Cambiar nombres en selección<a class="anchor" aria-label="anchor" href="#cambiar-nombres-en-selecci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<p>Usando <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> con una sintaxis como la de <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code> para cambiar el nombre de las columnas al mismo tiempo que seleccionarlas.</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>pais <span class="op">=</span> <span class="va">country</span>, 
           anio <span class="op">=</span> <span class="va">year</span>,
           poblacion <span class="op">=</span> <span class="va">pop</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 3</span>
<span class="co">#&gt;    pais         anio poblacion</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;int&gt;     &lt;int&gt;</span>
<span class="co">#&gt;  1 Afghanistan  1952   8425333</span>
<span class="co">#&gt;  2 Afghanistan  1957   9240934</span>
<span class="co">#&gt;  3 Afghanistan  1962  10267083</span>
<span class="co">#&gt;  4 Afghanistan  1967  11537966</span>
<span class="co">#&gt;  5 Afghanistan  1972  13079460</span>
<span class="co">#&gt;  6 Afghanistan  1977  14880372</span>
<span class="co">#&gt;  7 Afghanistan  1982  12881816</span>
<span class="co">#&gt;  8 Afghanistan  1987  13867957</span>
<span class="co">#&gt;  9 Afghanistan  1992  16317921</span>
<span class="co">#&gt; 10 Afghanistan  1997  22227415</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
<p>El código anterior es equivalente a combinar ambas operaciones.</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">pop</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>pais <span class="op">=</span> <span class="va">country</span>,
           anio <span class="op">=</span> <span class="va">year</span>,
           poblacion <span class="op">=</span> <span class="va">pop</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,704 x 3</span>
<span class="co">#&gt;    pais         anio poblacion</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;int&gt;     &lt;int&gt;</span>
<span class="co">#&gt;  1 Afghanistan  1952   8425333</span>
<span class="co">#&gt;  2 Afghanistan  1957   9240934</span>
<span class="co">#&gt;  3 Afghanistan  1962  10267083</span>
<span class="co">#&gt;  4 Afghanistan  1967  11537966</span>
<span class="co">#&gt;  5 Afghanistan  1972  13079460</span>
<span class="co">#&gt;  6 Afghanistan  1977  14880372</span>
<span class="co">#&gt;  7 Afghanistan  1982  12881816</span>
<span class="co">#&gt;  8 Afghanistan  1987  13867957</span>
<span class="co">#&gt;  9 Afghanistan  1992  16317921</span>
<span class="co">#&gt; 10 Afghanistan  1997  22227415</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
</div>
<div id="opciones-avanzadas-de-selección" class="section level3" number="6.4.7">
<h3>
<span class="header-section-number">6.4.7</span> Opciones avanzadas de selección<a class="anchor" aria-label="anchor" href="#opciones-avanzadas-de-selecci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> puede hacer uso de funciones de apoyo del paquete <code>tidyselect()</code>, que se cargan automáticamente junto con <code>dplyr</code>.</p>
<p>Para ejemplificar, usaremos el conjunto de datos <code>flights</code> del paquete <code>nycflights13</code>.</p>
<hr>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/nycflights13">nycflights13</a></span><span class="op">)</span>

<span class="va">flights</span>
<span class="co">#&gt; # A tibble: 336,776 x 19</span>
<span class="co">#&gt;     year month   day dep_time sched_dep_time dep_delay</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2013     1     1      517            515         2</span>
<span class="co">#&gt;  2  2013     1     1      533            529         4</span>
<span class="co">#&gt;  3  2013     1     1      542            540         2</span>
<span class="co">#&gt;  4  2013     1     1      544            545        -1</span>
<span class="co">#&gt;  5  2013     1     1      554            600        -6</span>
<span class="co">#&gt;  6  2013     1     1      554            558        -4</span>
<span class="co">#&gt;  7  2013     1     1      555            600        -5</span>
<span class="co">#&gt;  8  2013     1     1      557            600        -3</span>
<span class="co">#&gt;  9  2013     1     1      557            600        -3</span>
<span class="co">#&gt; 10  2013     1     1      558            600        -2</span>
<span class="co">#&gt; # ... with 336,766 more rows, and 13 more variables:</span>
<span class="co">#&gt; #   arr_time &lt;int&gt;, sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,</span>
<span class="co">#&gt; #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,</span>
<span class="co">#&gt; #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;,</span>
<span class="co">#&gt; #   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,</span>
<span class="co">#&gt; #   time_hour &lt;dttm&gt;</span></code></pre></div>
<div id="seleccionar-columnas-en-secuencia" class="section level4" number="6.4.7.1">
<h4>
<span class="header-section-number">6.4.7.1</span> Seleccionar columnas en secuencia<a class="anchor" aria-label="anchor" href="#seleccionar-columnas-en-secuencia"><i class="fas fa-link"></i></a>
</h4>
<p>Es posible seleccionar una secuencia de variables consecutivas si usamos el operador de secuencia (<code><a href="https://rdrr.io/r/base/Colon.html">:</a></code>).</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flights</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">dep_time</span><span class="op">:</span><span class="va">sched_arr_time</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 336,776 x 5</span>
<span class="co">#&gt;    dep_time sched_dep_time dep_delay arr_time sched_arr_time</span>
<span class="co">#&gt;       &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span>
<span class="co">#&gt;  1      517            515         2      830            819</span>
<span class="co">#&gt;  2      533            529         4      850            830</span>
<span class="co">#&gt;  3      542            540         2      923            850</span>
<span class="co">#&gt;  4      544            545        -1     1004           1022</span>
<span class="co">#&gt;  5      554            600        -6      812            837</span>
<span class="co">#&gt;  6      554            558        -4      740            728</span>
<span class="co">#&gt;  7      555            600        -5      913            854</span>
<span class="co">#&gt;  8      557            600        -3      709            723</span>
<span class="co">#&gt;  9      557            600        -3      838            846</span>
<span class="co">#&gt; 10      558            600        -2      753            745</span>
<span class="co">#&gt; # ... with 336,766 more rows</span></code></pre></div>
</div>
<div id="seleccionar-columnas-según-un-patrón" class="section level4" number="6.4.7.2">
<h4>
<span class="header-section-number">6.4.7.2</span> Seleccionar columnas según un patrón<a class="anchor" aria-label="anchor" href="#seleccionar-columnas-seg%C3%BAn-un-patr%C3%B3n"><i class="fas fa-link"></i></a>
</h4>
<p>Es posible usar funciones que nos permiten hacer <em>match</em> de los nombres de nuestras columnas con caracteres de texto:</p>
<ul>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>: El nombre empieza con un prefijo determinado</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code>: El nombre termina con un sufijo determinado</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code>: El nombre contiene una cadena de texto</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code>: El nombre hace <em>match</em> con una <em>expresión regular</em> (avanzado)</li>
</ul>
<p>Los patrones de texto deben especificarse entre comillas (<code>"</code>).</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flights</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"dep"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 336,776 x 2</span>
<span class="co">#&gt;    dep_time dep_delay</span>
<span class="co">#&gt;       &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1      517         2</span>
<span class="co">#&gt;  2      533         4</span>
<span class="co">#&gt;  3      542         2</span>
<span class="co">#&gt;  4      544        -1</span>
<span class="co">#&gt;  5      554        -6</span>
<span class="co">#&gt;  6      554        -4</span>
<span class="co">#&gt;  7      555        -5</span>
<span class="co">#&gt;  8      557        -3</span>
<span class="co">#&gt;  9      557        -3</span>
<span class="co">#&gt; 10      558        -2</span>
<span class="co">#&gt; # ... with 336,766 more rows</span></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flights</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"delay"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 336,776 x 2</span>
<span class="co">#&gt;    dep_delay arr_delay</span>
<span class="co">#&gt;        &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1         2        11</span>
<span class="co">#&gt;  2         4        20</span>
<span class="co">#&gt;  3         2        33</span>
<span class="co">#&gt;  4        -1       -18</span>
<span class="co">#&gt;  5        -6       -25</span>
<span class="co">#&gt;  6        -4        12</span>
<span class="co">#&gt;  7        -5        19</span>
<span class="co">#&gt;  8        -3       -14</span>
<span class="co">#&gt;  9        -3        -8</span>
<span class="co">#&gt; 10        -2         8</span>
<span class="co">#&gt; # ... with 336,766 more rows</span></code></pre></div>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flights</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"time"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 336,776 x 6</span>
<span class="co">#&gt;    dep_time sched_dep_time arr_time sched_arr_time air_time</span>
<span class="co">#&gt;       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1      517            515      830            819      227</span>
<span class="co">#&gt;  2      533            529      850            830      227</span>
<span class="co">#&gt;  3      542            540      923            850      160</span>
<span class="co">#&gt;  4      544            545     1004           1022      183</span>
<span class="co">#&gt;  5      554            600      812            837      116</span>
<span class="co">#&gt;  6      554            558      740            728      150</span>
<span class="co">#&gt;  7      555            600      913            854      158</span>
<span class="co">#&gt;  8      557            600      709            723       53</span>
<span class="co">#&gt;  9      557            600      838            846      140</span>
<span class="co">#&gt; 10      558            600      753            745      138</span>
<span class="co">#&gt; # ... with 336,766 more rows, and 1 more variable:</span>
<span class="co">#&gt; #   time_hour &lt;dttm&gt;</span></code></pre></div>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flights</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"a(i|r)r_time"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 336,776 x 3</span>
<span class="co">#&gt;    arr_time sched_arr_time air_time</span>
<span class="co">#&gt;       &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1      830            819      227</span>
<span class="co">#&gt;  2      850            830      227</span>
<span class="co">#&gt;  3      923            850      160</span>
<span class="co">#&gt;  4     1004           1022      183</span>
<span class="co">#&gt;  5      812            837      116</span>
<span class="co">#&gt;  6      740            728      150</span>
<span class="co">#&gt;  7      913            854      158</span>
<span class="co">#&gt;  8      709            723       53</span>
<span class="co">#&gt;  9      838            846      140</span>
<span class="co">#&gt; 10      753            745      138</span>
<span class="co">#&gt; # ... with 336,766 more rows</span></code></pre></div>
</div>
<div id="seleccionar-avanzado-simultáneo" class="section level4" number="6.4.7.3">
<h4>
<span class="header-section-number">6.4.7.3</span> Seleccionar avanzado simultáneo<a class="anchor" aria-label="anchor" href="#seleccionar-avanzado-simult%C3%A1neo"><i class="fas fa-link"></i></a>
</h4>
<p>Es posible combinar todas las formas de selección dentro de una sola llamada a <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">flights</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span><span class="op">:</span><span class="va">day</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"arr"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 336,776 x 5</span>
<span class="co">#&gt;     year month   day arr_time arr_delay</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2013     1     1      830        11</span>
<span class="co">#&gt;  2  2013     1     1      850        20</span>
<span class="co">#&gt;  3  2013     1     1      923        33</span>
<span class="co">#&gt;  4  2013     1     1     1004       -18</span>
<span class="co">#&gt;  5  2013     1     1      812       -25</span>
<span class="co">#&gt;  6  2013     1     1      740        12</span>
<span class="co">#&gt;  7  2013     1     1      913        19</span>
<span class="co">#&gt;  8  2013     1     1      709       -14</span>
<span class="co">#&gt;  9  2013     1     1      838        -8</span>
<span class="co">#&gt; 10  2013     1     1      753         8</span>
<span class="co">#&gt; # ... with 336,766 more rows</span></code></pre></div>
</div>
</div>
</div>
<div id="transformación-filas" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Transformación filas<a class="anchor" aria-label="anchor" href="#transformaci%C3%B3n-filas"><i class="fas fa-link"></i></a>
</h2>
<div id="obtener-un-subconjunto-de-datos" class="section level3" number="6.5.1">
<h3>
<span class="header-section-number">6.5.1</span> Obtener un subconjunto de datos<a class="anchor" aria-label="anchor" href="#obtener-un-subconjunto-de-datos"><i class="fas fa-link"></i></a>
</h3>
<p>La función <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> nos simplifica la tarea de hacer <em>subsetting</em> (escoger un subconjunto de nuestros datos). Debemos especificar dos elementos:</p>
<ol style="list-style-type: decimal">
<li>El nombre del conjunto de datos</li>
<li>La condición que tiene cumplir una observación para permanecer.</li>
</ol>
<p>Para establecer las condiciones, debemos usar operaciones lógicas. Del mismo modo que los operadores aritméticos nos permiten obtener un resultado aritmético (<em>aka</em>, numérico) en nuestros cálculos, existen otros operadores que nos permiten obtener resultados lógicos.</p>
<p>En esta sección, usaremos <code>gapminder</code> como ejemplo.</p>
<div id="operadores-relacionales" class="section level4" number="6.5.1.1">
<h4>
<span class="header-section-number">6.5.1.1</span> Operadores relacionales<a class="anchor" aria-label="anchor" href="#operadores-relacionales"><i class="fas fa-link"></i></a>
</h4>
<p>Los primeros de ellos son los relacionales, y ya los conocemos desde el colegio, pero es bueno saber cómo escribirlos en R. La siguiente tabla nos muestra para qué sirve cada uno de ellos.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">Operador</th>
<th align="left">Uso</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"><code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code></td>
<td align="left">Igual que</td>
</tr>
<tr class="even">
<td align="right"><code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code></td>
<td align="left">Diferente que</td>
</tr>
<tr class="odd">
<td align="right"><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code></td>
<td align="left">Mayor que</td>
</tr>
<tr class="even">
<td align="right"><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code></td>
<td align="left">Menor que</td>
</tr>
<tr class="odd">
<td align="right"><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code></td>
<td align="left">Mayor o igual que</td>
</tr>
<tr class="even">
<td align="right"><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code></td>
<td align="left">Menor o igual que</td>
</tr>
</tbody>
</table></div>
</div>
<div id="subsetting-basado-en-un-solo-valor" class="section level4" number="6.5.1.2">
<h4>
<span class="header-section-number">6.5.1.2</span> Subsetting basado en un solo valor<a class="anchor" aria-label="anchor" href="#subsetting-basado-en-un-solo-valor"><i class="fas fa-link"></i></a>
</h4>
<p>De entre todas las observaciones, podemos escoger aquellas cuyo país sea “Perú.” Para ello, usamos la operación <code>country == "Peru"</code>.</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op">==</span> <span class="st">"Peru"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 12 x 6</span>
<span class="co">#&gt;    country continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Peru    Americas   1952    43.9  8025700     3759.</span>
<span class="co">#&gt;  2 Peru    Americas   1957    46.3  9146100     4245.</span>
<span class="co">#&gt;  3 Peru    Americas   1962    49.1 10516500     4957.</span>
<span class="co">#&gt;  4 Peru    Americas   1967    51.4 12132200     5788.</span>
<span class="co">#&gt;  5 Peru    Americas   1972    55.4 13954700     5938.</span>
<span class="co">#&gt;  6 Peru    Americas   1977    58.4 15990099     6281.</span>
<span class="co">#&gt;  7 Peru    Americas   1982    61.4 18125129     6435.</span>
<span class="co">#&gt;  8 Peru    Americas   1987    64.1 20195924     6361.</span>
<span class="co">#&gt;  9 Peru    Americas   1992    66.5 22430449     4446.</span>
<span class="co">#&gt; 10 Peru    Americas   1997    68.4 24748122     5838.</span>
<span class="co">#&gt; 11 Peru    Americas   2002    69.9 26769436     5909.</span>
<span class="co">#&gt; 12 Peru    Americas   2007    71.4 28674757     7409.</span></code></pre></div>
<p>También podemos hacer comparaciones basadas en números. Por ejemplo, todas las observaciones correspondientes al año 2007.</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 142 x 6</span>
<span class="co">#&gt;    country     continent  year lifeExp       pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia       2007    43.8  31889923      975.</span>
<span class="co">#&gt;  2 Albania     Europe     2007    76.4   3600523     5937.</span>
<span class="co">#&gt;  3 Algeria     Africa     2007    72.3  33333216     6223.</span>
<span class="co">#&gt;  4 Angola      Africa     2007    42.7  12420476     4797.</span>
<span class="co">#&gt;  5 Argentina   Americas   2007    75.3  40301927    12779.</span>
<span class="co">#&gt;  6 Australia   Oceania    2007    81.2  20434176    34435.</span>
<span class="co">#&gt;  7 Austria     Europe     2007    79.8   8199783    36126.</span>
<span class="co">#&gt;  8 Bahrain     Asia       2007    75.6    708573    29796.</span>
<span class="co">#&gt;  9 Bangladesh  Asia       2007    64.1 150448339     1391.</span>
<span class="co">#&gt; 10 Belgium     Europe     2007    79.4  10392226    33693.</span>
<span class="co">#&gt; # ... with 132 more rows</span></code></pre></div>
<p>Podemos escoger sólo aquellas observaciones que cuya población sea mayor a mil millones.</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">pop</span> <span class="op">&gt;</span> <span class="fl">1000000000</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   country continent  year lifeExp        pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;      &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 China   Asia       1982    65.5 1000281000      962.</span>
<span class="co">#&gt; 2 China   Asia       1987    67.3 1084035000     1379.</span>
<span class="co">#&gt; 3 China   Asia       1992    68.7 1164970000     1656.</span>
<span class="co">#&gt; 4 China   Asia       1997    70.4 1230075000     2289.</span>
<span class="co">#&gt; 5 China   Asia       2002    72.0 1280400000     3119.</span>
<span class="co">#&gt; 6 China   Asia       2007    73.0 1318683096     4959.</span>
<span class="co">#&gt; 7 India   Asia       2002    62.9 1034172547     1747.</span>
<span class="co">#&gt; 8 India   Asia       2007    64.7 1110396331     2452.</span></code></pre></div>
<p>Podemos escoger las observaciones cuya expectativa de vida sea menor a 30 años.</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">lifeExp</span> <span class="op">&lt;</span> <span class="fl">30</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 6</span>
<span class="co">#&gt;   country     continent  year lifeExp     pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Afghanistan Asia       1952    28.8 8425333      779.</span>
<span class="co">#&gt; 2 Rwanda      Africa     1992    23.6 7290203      737.</span></code></pre></div>
</div>
<div id="subsetting-basado-en-múltiples-valores" class="section level4" number="6.5.1.3">
<h4>
<span class="header-section-number">6.5.1.3</span> Subsetting basado en múltiples valores<a class="anchor" aria-label="anchor" href="#subsetting-basado-en-m%C3%BAltiples-valores"><i class="fas fa-link"></i></a>
</h4>
<p>Si usamos más de una condición, sólo permanecerán aquellas que cumplan con todas las expuestas. Por ejemplo, observaciones donde la población sea mayor a mil millones y la expectativa de vida mayor a 70 años.</p>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">pop</span> <span class="op">&gt;</span> <span class="fl">1000000000</span>, <span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 6</span>
<span class="co">#&gt;   country continent  year lifeExp        pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;      &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 China   Asia       1997    70.4 1230075000     2289.</span>
<span class="co">#&gt; 2 China   Asia       2002    72.0 1280400000     3119.</span>
<span class="co">#&gt; 3 China   Asia       2007    73.0 1318683096     4959.</span></code></pre></div>
<p>Países de América a partir del 2002 cuyo PBI per cápita fue mayor a $15000.</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Americas"</span>, <span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">2002</span>, <span class="va">gdpPercap</span> <span class="op">&gt;</span> <span class="fl">15000</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 7 x 6</span>
<span class="co">#&gt;   country             continent  year lifeExp    pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;               &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Canada              Americas   2002    79.8 3.19e7    33329.</span>
<span class="co">#&gt; 2 Canada              Americas   2007    80.7 3.34e7    36319.</span>
<span class="co">#&gt; 3 Puerto Rico         Americas   2002    77.8 3.86e6    18856.</span>
<span class="co">#&gt; 4 Puerto Rico         Americas   2007    78.7 3.94e6    19329.</span>
<span class="co">#&gt; 5 Trinidad and Tobago Americas   2007    69.8 1.06e6    18009.</span>
<span class="co">#&gt; 6 United States       Americas   2002    77.3 2.88e8    39097.</span>
<span class="co">#&gt; 7 United States       Americas   2007    78.2 3.01e8    42952.</span></code></pre></div>
</div>
<div id="operadores-lógicos" class="section level4" number="6.5.1.4">
<h4>
<span class="header-section-number">6.5.1.4</span> Operadores lógicos<a class="anchor" aria-label="anchor" href="#operadores-l%C3%B3gicos"><i class="fas fa-link"></i></a>
</h4>
<p>Para potenciar nuestras habilidades de comparación, podemos hacer uso de operadores lógicos. La siguiente tabla te muestra cuáles son:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">Operador</th>
<th align="left">Uso</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"><code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code></td>
<td align="left">Y lógico</td>
</tr>
<tr class="even">
<td align="right"><code><a href="https://rdrr.io/r/base/Logic.html">|</a></code></td>
<td align="left">O lógico</td>
</tr>
<tr class="odd">
<td align="right"><code><a href="https://rdrr.io/r/base/Logic.html">!</a></code></td>
<td align="left">NO lógico</td>
</tr>
</tbody>
</table></div>
<p>Pueden usarse para obtener combinar comparaciones.</p>
</div>
<div id="y-lógico" class="section level4" number="6.5.1.5">
<h4>
<span class="header-section-number">6.5.1.5</span> <code>&amp;</code> (Y lógico)<a class="anchor" aria-label="anchor" href="#y-l%C3%B3gico"><i class="fas fa-link"></i></a>
</h4>
<p>El Y lógico, en el contexto de <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> funciona de manera similar a ir agregando nuevas condiciones. Permite que permanezcan observaciones que satisfagan <strong>todas</strong> las condiciones. Por ejemplo, para obtener observaciones donde la población sea mayor a mil millones y la expectativa de vida mayor a 70 años.</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">pop</span> <span class="op">&gt;</span> <span class="fl">1000000000</span> <span class="op">&amp;</span> <span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 6</span>
<span class="co">#&gt;   country continent  year lifeExp        pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;      &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 China   Asia       1997    70.4 1230075000     2289.</span>
<span class="co">#&gt; 2 China   Asia       2002    72.0 1280400000     3119.</span>
<span class="co">#&gt; 3 China   Asia       2007    73.0 1318683096     4959.</span></code></pre></div>
</div>
<div id="o-lógico" class="section level4" number="6.5.1.6">
<h4>
<span class="header-section-number">6.5.1.6</span> <code>|</code> (O lógico)<a class="anchor" aria-label="anchor" href="#o-l%C3%B3gico"><i class="fas fa-link"></i></a>
</h4>
<p>El O lógico permite que permanezcan las observaciones que satisfagan <strong>al menos una</strong> de las condiciones indicadas. Por ejemplo, para obtener las observaciones correspondientes a Perú o Colombia.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op">==</span> <span class="st">"Peru"</span> <span class="op">|</span> <span class="va">country</span> <span class="op">==</span> <span class="st">"Colombia"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 24 x 6</span>
<span class="co">#&gt;    country  continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Colombia Americas   1952    50.6 12350771     2144.</span>
<span class="co">#&gt;  2 Colombia Americas   1957    55.1 14485993     2324.</span>
<span class="co">#&gt;  3 Colombia Americas   1962    57.9 17009885     2492.</span>
<span class="co">#&gt;  4 Colombia Americas   1967    60.0 19764027     2679.</span>
<span class="co">#&gt;  5 Colombia Americas   1972    61.6 22542890     3265.</span>
<span class="co">#&gt;  6 Colombia Americas   1977    63.8 25094412     3816.</span>
<span class="co">#&gt;  7 Colombia Americas   1982    66.7 27764644     4398.</span>
<span class="co">#&gt;  8 Colombia Americas   1987    67.8 30964245     4903.</span>
<span class="co">#&gt;  9 Colombia Americas   1992    68.4 34202721     5445.</span>
<span class="co">#&gt; 10 Colombia Americas   1997    70.3 37657830     6117.</span>
<span class="co">#&gt; # ... with 14 more rows</span></code></pre></div>
<p>Es posible ir agregando cuantos O lógicos sean necesarios para obtener todas las observaciones de un listado de países. Por ejemplo, los que pertenecen a la Alianza del Pacífico.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op">==</span> <span class="st">"Peru"</span> <span class="op">|</span> <span class="va">country</span> <span class="op">==</span> <span class="st">"Chile"</span><span class="op">|</span> <span class="va">country</span> <span class="op">==</span> <span class="st">"Colombia"</span><span class="op">|</span> <span class="va">country</span> <span class="op">==</span> <span class="st">"Mexico"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 48 x 6</span>
<span class="co">#&gt;    country continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Chile   Americas   1952    54.7  6377619     3940.</span>
<span class="co">#&gt;  2 Chile   Americas   1957    56.1  7048426     4316.</span>
<span class="co">#&gt;  3 Chile   Americas   1962    57.9  7961258     4519.</span>
<span class="co">#&gt;  4 Chile   Americas   1967    60.5  8858908     5107.</span>
<span class="co">#&gt;  5 Chile   Americas   1972    63.4  9717524     5494.</span>
<span class="co">#&gt;  6 Chile   Americas   1977    67.1 10599793     4757.</span>
<span class="co">#&gt;  7 Chile   Americas   1982    70.6 11487112     5096.</span>
<span class="co">#&gt;  8 Chile   Americas   1987    72.5 12463354     5547.</span>
<span class="co">#&gt;  9 Chile   Americas   1992    74.1 13572994     7596.</span>
<span class="co">#&gt; 10 Chile   Americas   1997    75.8 14599929    10118.</span>
<span class="co">#&gt; # ... with 38 more rows</span></code></pre></div>
</div>
<div id="in" class="section level4" number="6.5.1.7">
<h4>
<span class="header-section-number">6.5.1.7</span> <code>%in%</code><a class="anchor" aria-label="anchor" href="#in"><i class="fas fa-link"></i></a>
</h4>
<p>R permite usar el operador <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> para usar condiciones basadas en un O lógico de manera más sencilla.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Peru"</span>, <span class="st">"Chile"</span>, <span class="st">"Colombia"</span>, <span class="st">"Mexico"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 48 x 6</span>
<span class="co">#&gt;    country continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Chile   Americas   1952    54.7  6377619     3940.</span>
<span class="co">#&gt;  2 Chile   Americas   1957    56.1  7048426     4316.</span>
<span class="co">#&gt;  3 Chile   Americas   1962    57.9  7961258     4519.</span>
<span class="co">#&gt;  4 Chile   Americas   1967    60.5  8858908     5107.</span>
<span class="co">#&gt;  5 Chile   Americas   1972    63.4  9717524     5494.</span>
<span class="co">#&gt;  6 Chile   Americas   1977    67.1 10599793     4757.</span>
<span class="co">#&gt;  7 Chile   Americas   1982    70.6 11487112     5096.</span>
<span class="co">#&gt;  8 Chile   Americas   1987    72.5 12463354     5547.</span>
<span class="co">#&gt;  9 Chile   Americas   1992    74.1 13572994     7596.</span>
<span class="co">#&gt; 10 Chile   Americas   1997    75.8 14599929    10118.</span>
<span class="co">#&gt; # ... with 38 more rows</span></code></pre></div>
</div>
<div id="no-lógico" class="section level4" number="6.5.1.8">
<h4>
<span class="header-section-number">6.5.1.8</span> <code>!</code> (NO lógico)<a class="anchor" aria-label="anchor" href="#no-l%C3%B3gico"><i class="fas fa-link"></i></a>
</h4>
<p>Puedes usar un NO lógico para obtener lo opuesto a lo indicado en tu condición. Por ejemplo, observaciones cuyo continente no sea Américas o Europa.</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="op">!</span> <span class="va">continent</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Americas"</span>, <span class="st">"Europe"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,044 x 6</span>
<span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span>
<span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span>
<span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span>
<span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span>
<span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span>
<span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span>
<span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span>
<span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span>
<span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span>
<span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span>
<span class="co">#&gt; # ... with 1,034 more rows</span></code></pre></div>
</div>
</div>
<div id="organizar-filas-según-sus-valores" class="section level3" number="6.5.2">
<h3>
<span class="header-section-number">6.5.2</span> Organizar filas según sus valores<a class="anchor" aria-label="anchor" href="#organizar-filas-seg%C3%BAn-sus-valores"><i class="fas fa-link"></i></a>
</h3>
<p>Para esto, usar el verbo <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</p>
<p>Para el siguiente verbo vamos a trabajar con un subconjunto de observaciones de gapminder.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gapminder</span>, 
       <span class="va">country</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Peru"</span>, <span class="st">"Chile"</span>, <span class="st">"Colombia"</span>, <span class="st">"Mexico"</span><span class="op">)</span>,
       <span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">2002</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder_subset</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   country  continent  year lifeExp       pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Chile    Americas   2002    77.9  15497046    10779.</span>
<span class="co">#&gt; 2 Chile    Americas   2007    78.6  16284741    13172.</span>
<span class="co">#&gt; 3 Colombia Americas   2002    71.7  41008227     5755.</span>
<span class="co">#&gt; 4 Colombia Americas   2007    72.9  44227550     7007.</span>
<span class="co">#&gt; 5 Mexico   Americas   2002    74.9 102479927    10742.</span>
<span class="co">#&gt; 6 Mexico   Americas   2007    76.2 108700891    11978.</span>
<span class="co">#&gt; 7 Peru     Americas   2002    69.9  26769436     5909.</span>
<span class="co">#&gt; 8 Peru     Americas   2007    71.4  28674757     7409.</span></code></pre></div>
<p><code>gapminder_subset</code> está ordenado por el orden alfabético de la columna <code>country</code>.</p>
<p>La utilidad de <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> es que nos permite ordenar nuestros datos en base a las variables que escojamos. Debes identificar:</p>
<ol style="list-style-type: decimal">
<li>El nombre del conjunto de datos</li>
<li>Las columnas para el ordenamiento y su tipo de orden.</li>
</ol>
<p>Por defecto, el conjunto de datos se ordenará de manera ascendente. Los caracteres de texto se ordenarán en orden alfabético y los números de menor a mayor.</p>
<div id="organizar-según-los-valores-de-una-columna" class="section level4" number="6.5.2.1">
<h4>
<span class="header-section-number">6.5.2.1</span> Organizar según los valores de una columna<a class="anchor" aria-label="anchor" href="#organizar-seg%C3%BAn-los-valores-de-una-columna"><i class="fas fa-link"></i></a>
</h4>
<p>Podemos indicar que el conjunto de datos se ordene por año.</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder_subset</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   country  continent  year lifeExp       pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Chile    Americas   2002    77.9  15497046    10779.</span>
<span class="co">#&gt; 2 Colombia Americas   2002    71.7  41008227     5755.</span>
<span class="co">#&gt; 3 Mexico   Americas   2002    74.9 102479927    10742.</span>
<span class="co">#&gt; 4 Peru     Americas   2002    69.9  26769436     5909.</span>
<span class="co">#&gt; 5 Chile    Americas   2007    78.6  16284741    13172.</span>
<span class="co">#&gt; 6 Colombia Americas   2007    72.9  44227550     7007.</span>
<span class="co">#&gt; 7 Mexico   Americas   2007    76.2 108700891    11978.</span>
<span class="co">#&gt; 8 Peru     Americas   2007    71.4  28674757     7409.</span></code></pre></div>
<p>Ahora aparecen primero los datos del 2002 y luego los del 2007. Por defecto, el orden se hace en forma ascendente.</p>
<p>Al usar <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>, si uso la función <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code> rodeando la columna elegida, el orden ahora es <em>descendente</em>.</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder_subset</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   country  continent  year lifeExp       pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Chile    Americas   2007    78.6  16284741    13172.</span>
<span class="co">#&gt; 2 Colombia Americas   2007    72.9  44227550     7007.</span>
<span class="co">#&gt; 3 Mexico   Americas   2007    76.2 108700891    11978.</span>
<span class="co">#&gt; 4 Peru     Americas   2007    71.4  28674757     7409.</span>
<span class="co">#&gt; 5 Chile    Americas   2002    77.9  15497046    10779.</span>
<span class="co">#&gt; 6 Colombia Americas   2002    71.7  41008227     5755.</span>
<span class="co">#&gt; 7 Mexico   Americas   2002    74.9 102479927    10742.</span>
<span class="co">#&gt; 8 Peru     Americas   2002    69.9  26769436     5909.</span></code></pre></div>
</div>
<div id="organizar-en-base-a-más-de-una-columna" class="section level4" number="6.5.2.2">
<h4>
<span class="header-section-number">6.5.2.2</span> Organizar en base a más de una columna<a class="anchor" aria-label="anchor" href="#organizar-en-base-a-m%C3%A1s-de-una-columna"><i class="fas fa-link"></i></a>
</h4>
<p>Puedo ordenar en base a más de una columna, sólo debo agregarla como otro argumento. Por ejemplo, si quiero ver el orden en las expectativas de vida por año.</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder_subset</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">lifeExp</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 6</span>
<span class="co">#&gt;   country  continent  year lifeExp       pop gdpPercap</span>
<span class="co">#&gt;   &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Peru     Americas   2002    69.9  26769436     5909.</span>
<span class="co">#&gt; 2 Colombia Americas   2002    71.7  41008227     5755.</span>
<span class="co">#&gt; 3 Mexico   Americas   2002    74.9 102479927    10742.</span>
<span class="co">#&gt; 4 Chile    Americas   2002    77.9  15497046    10779.</span>
<span class="co">#&gt; 5 Peru     Americas   2007    71.4  28674757     7409.</span>
<span class="co">#&gt; 6 Colombia Americas   2007    72.9  44227550     7007.</span>
<span class="co">#&gt; 7 Mexico   Americas   2007    76.2 108700891    11978.</span>
<span class="co">#&gt; 8 Chile    Americas   2007    78.6  16284741    13172.</span></code></pre></div>
</div>
</div>
</div>
<div id="lecturas-recomendadas" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> Lecturas recomendadas<a class="anchor" aria-label="anchor" href="#lecturas-recomendadas"><i class="fas fa-link"></i></a>
</h2>
<p>Esta sesión está basada en el capítulo “Data transformation” del libro <a href="https://r4ds.had.co.nz/transform.html">R for Data Science</a> escrito por Hadley Wickham (autor del paquete <code>dplyr</code>).</p>
<p>También te puede ser útil revisar el capítulo “The tidyverse” del libro <a href="https://rafalab.github.io/dsbook/tidyverse.html">Introduction to Data Science</a> escrito por Rafael A. Irizarry, o el capítulo “Data Wrangling” del libro <a href="https://moderndive.com/3-wrangling.html">Statistical Inference via Data Science</a> escrito por Chester Ismay &amp; Albert Y. Kim (aquí se acuñó el término <em>los cinco gráficos nombrados</em>).</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="importaci%C3%B3n-de-datos.html"><span class="header-section-number">5</span> Importación de datos</a></div>
<div class="next"><a href="references.html">References</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#transformaci%C3%B3n"><span class="header-section-number">6</span> Transformación</a></li>
<li><a class="nav-link" href="#tibbles"><span class="header-section-number">6.1</span> Tibbles</a></li>
<li><a class="nav-link" href="#visualizar-datos"><span class="header-section-number">6.2</span> Visualizar datos</a></li>
<li><a class="nav-link" href="#el-paquete-dplyr"><span class="header-section-number">6.3</span> El paquete dplyr</a></li>
<li>
<a class="nav-link" href="#transformaci%C3%B3n-de-columnas"><span class="header-section-number">6.4</span> Transformación de columnas</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#cambiar-nombre-de-una-columna"><span class="header-section-number">6.4.1</span> Cambiar nombre de una columna</a></li>
<li><a class="nav-link" href="#cambiar-nombre-de-varias-columnas"><span class="header-section-number">6.4.2</span> Cambiar nombre de varias columnas</a></li>
<li><a class="nav-link" href="#cambiar-posici%C3%B3n-de-una-columna"><span class="header-section-number">6.4.3</span> Cambiar posición de una columna</a></li>
<li><a class="nav-link" href="#seleccionar-columnas"><span class="header-section-number">6.4.4</span> Seleccionar columnas</a></li>
<li><a class="nav-link" href="#remover-columnas"><span class="header-section-number">6.4.5</span> Remover columnas</a></li>
<li><a class="nav-link" href="#cambiar-nombres-en-selecci%C3%B3n"><span class="header-section-number">6.4.6</span> Cambiar nombres en selección</a></li>
<li><a class="nav-link" href="#opciones-avanzadas-de-selecci%C3%B3n"><span class="header-section-number">6.4.7</span> Opciones avanzadas de selección</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#transformaci%C3%B3n-filas"><span class="header-section-number">6.5</span> Transformación filas</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#obtener-un-subconjunto-de-datos"><span class="header-section-number">6.5.1</span> Obtener un subconjunto de datos</a></li>
<li><a class="nav-link" href="#organizar-filas-seg%C3%BAn-sus-valores"><span class="header-section-number">6.5.2</span> Organizar filas según sus valores</a></li>
</ul>
</li>
<li><a class="nav-link" href="#lecturas-recomendadas"><span class="header-section-number">6.6</span> Lecturas recomendadas</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/06-transformacion.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/06-transformacion.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Cookbook de análisis de datos básico</strong>" was written by Samuel Calderon. It was last built on 2021-11-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
