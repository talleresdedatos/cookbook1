<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 4 Gráficos | Cookbook de análisis de datos básico</title>
<meta name="author" content="Samuel Calderon">
<meta name="description" content="La habilidad de crear gráficos a partir de los datos que recolectamos potencia nuestra capacidad de análisis. Los gráficos nos pueden ayudar a percibir de manera rápida patrones de comportamiento...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Capítulo 4 Gráficos | Cookbook de análisis de datos básico">
<meta property="og:type" content="book">
<meta property="og:description" content="La habilidad de crear gráficos a partir de los datos que recolectamos potencia nuestra capacidad de análisis. Los gráficos nos pueden ayudar a percibir de manera rápida patrones de comportamiento...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 4 Gráficos | Cookbook de análisis de datos básico">
<meta name="twitter:description" content="La habilidad de crear gráficos a partir de los datos que recolectamos potencia nuestra capacidad de análisis. Los gráficos nos pueden ayudar a percibir de manera rápida patrones de comportamiento...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Cookbook de análisis de datos básico</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Presentación</a></li>
<li><a class="" href="conociendo-R.html"><span class="header-section-number">1</span> R y el IDE RStudio</a></li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">2</span> Rmarkdown</a></li>
<li><a class="" href="repaso-de-conceptos-estad%C3%ADsticos.html"><span class="header-section-number">3</span> Repaso de conceptos estadísticos</a></li>
<li><a class="active" href="gr%C3%A1ficos.html"><span class="header-section-number">4</span> Gráficos</a></li>
<li><a class="" href="importaci%C3%B3n-de-datos.html"><span class="header-section-number">5</span> Importación de datos</a></li>
<li><a class="" href="transformaci%C3%B3n.html"><span class="header-section-number">6</span> Transformación</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="gráficos" class="section level1" number="4">
<h1>
<span class="header-section-number">Capítulo 4</span> Gráficos<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos"><i class="fas fa-link"></i></a>
</h1>
<p>La habilidad de crear gráficos a partir de los datos que recolectamos potencia nuestra capacidad de análisis. Los gráficos nos pueden ayudar a percibir de manera rápida patrones de comportamiento en nuestra data y, al mismo tiempo, resumir de manera visual aquello que queremos mostrar a nuestra audiencia.</p>
<p>Esta sesión tiene como objetivo explicar el uso de la gramática de los gráficos, un marco conceptual cuya aplicación permite realizar visualizaciones de datos de manera sencilla y coherente. No vamos a buscar explicar todos los elementos teóricos que existen detrás del marco conceptual mencionado. En cambio, preferimos explicar sólo los elementos clave, usando ejemplos claros para que, al finalizar la, <strong>cualquiera pueda intentar crear sus propios gráficos</strong>.</p>
<p>No somos las primeras personas en tratar de explicar este tema. De hecho, este tutorial será una adaptación del gran trabajo realizado por <a href="https://chester.rbind.io/">Chester Ismay</a> y <a href="https://rudeboybert.rbind.io/">Albert Y. Kim</a> en su libro <a href="https://moderndive.com/2-viz.html"><em>Statistical Inference via Data Science: A ModernDive into R and the Tidyverse</em></a>.</p>
<div id="conjunto-de-datos-de-ejemplo" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> Conjunto de datos de ejemplo<a class="anchor" aria-label="anchor" href="#conjunto-de-datos-de-ejemplo"><i class="fas fa-link"></i></a>
</h2>
<p>Durante esta sesión usaremos el conjunto de datos <code>gapminder</code> que viene incluido dentro del paquete <code>gapminder</code> para los gráficos de ejemplo. Si aún no cuentas con el paquete, puedes instalarlo usando el siguiente código en la consola.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"gapminder"</span><span class="op">)</span></code></pre></div>
<p>La instalación de paquetes es un proceso que debe realizarse una sola vez. Cuando requieras usar un paquete instalado debes <em>llamarlo</em> usando la función <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span>
<span class="co">#&gt; # A tibble: 1,704 x 6</span>
<span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span>
<span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span>
<span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span>
<span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span>
<span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span>
<span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span>
<span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span>
<span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span>
<span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span>
<span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span>
<span class="co">#&gt; # ... with 1,694 more rows</span></code></pre></div>
<p>Recuerda que <code>gapminder</code> es un set de datos que ha sido previamente limpiado y ordenado. Normalmente, estos son pasos previos que debe realizar el analista de datos.</p>
<center>
<img src="images/dog-werewolf.png" width="500">
</center>
</div>
<div id="la-gramática" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> La gramática<a class="anchor" aria-label="anchor" href="#la-gram%C3%A1tica"><i class="fas fa-link"></i></a>
</h2>
<p>El paquete <code>ggplot2</code>, elaborado por <a href="http://hadley.nz/">Hadley Wickham</a> es la implementanción en R de la gramática de los gráficos, teoría desarrollada por <a href="https://www.cs.uic.edu/~wilkinson/">Leland Wilkinson</a>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sólo ggplot2</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></code></pre></div>
<p>Puedes cargar <code>ggplot2</code> individualmente o junto con los paquetes del <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Todo el tidyverse</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>Del mismo modo que para construir una oración en nuestro idioma, hacemos uso de combinaciones de palabras (que pueden ser sustantivos, verbos, adjetivos, etc) siguiendo un conjunto de reglas conocido como <em>gramática</em>, la <em>gramática de los gráficos</em> nos brinda las reglas para construir gráficos estadísticos.</p>
<div id="componentes-de-la-gramática" class="section level3" number="4.2.1">
<h3>
<span class="header-section-number">4.2.1</span> Componentes de la gramática<a class="anchor" aria-label="anchor" href="#componentes-de-la-gram%C3%A1tica"><i class="fas fa-link"></i></a>
</h3>
<p>En pocas palabras, la gramática de los gráficos nos quiere decir que:</p>
<blockquote>
<p>Un gráfico estadístico es el <strong>mapeo</strong> de variables en nuestra <strong>data</strong> hacia atributos <strong>estéticos</strong> de figuras <strong>geométricas</strong>.</p>
</blockquote>
<p>Podemos construir un gráfico a partir de tres componentes esenciales:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code>: el set de datos que contiene las variables de interés</li>
<li>
<code>geom</code>: las figuras geométricas en cuestión. Nos referimos al tipo de objeto que podemos observar en un gráfico. Por ejemplo: puntos, líneas o barras.</li>
<li>
<code>aes</code>: los atributos estéticos de la figura geométrica. Por ejemplo, su posición en los ejes x/y, color, forma y tamaño. Los atributos estéticos son <em>mapeados</em> a las variables contenidas en nuestro set de datos.</li>
</ol>
</div>
<div id="un-breve-ejemplo" class="section level3" number="4.2.2">
<h3>
<span class="header-section-number">4.2.2</span> Un breve ejemplo<a class="anchor" aria-label="anchor" href="#un-breve-ejemplo"><i class="fas fa-link"></i></a>
</h3>
<p>Para mostrar lo simple que puede resultar graficar usando los componentes mencionados, usaremos datos del paquete <code>gapminder</code>. Para este primer ejemplo utilizaremos sólo los datos de expectativa de vida en Perú a lo largo de los años. Para ello crearemos <code>datos_peru</code> usando algunas funciones del paquete <code>dplyr</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="va">datos_peru</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">country</span> <span class="op">==</span> <span class="st">"Peru"</span><span class="op">)</span></code></pre></div>
<p>Ahora que tenemos <code>df_ejemplo</code>, sólo necesitamos usar dos líneas de código para ver la evolución de la expectativa de vida de los peruanos. Recuerda que para ello hemos cargado previamente <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datos_peru</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/plot_ex1-1.png" width="672"></div>
<p>¿Cómo funciona la gramática? Anteriormente te habíamos mencionado que <code>ggplot</code> requiere tres componentes básicos para crear gráficos: los datos, el mapeo de variables y las figuras geométricas que representarán nuestros datos.</p>
<p>En el código anterior:</p>
<ol style="list-style-type: decimal">
<li>Le indicamos a la función <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> que nuestra <em>data</em> será <code>df_ejemplo</code>.</li>
<li>Con <em>mapping</em> le pedimos que mapee la variable <code>year</code> al eje <em>X</em> y la variable <code>lifeExp</code> al eje <em>Y</em>.</li>
<li>Además de hacer esto, es necesario indicarle qué figura geométrica debe usar <code>ggplot</code> para representar nuestros datos. Esta instrucción se la indicamos con <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>, pidiendole que lo haga con una línea.</li>
</ol>
</div>
<div id="ggplot-conciso" class="section level3" number="4.2.3">
<h3>
<span class="header-section-number">4.2.3</span> ggplot conciso<a class="anchor" aria-label="anchor" href="#ggplot-conciso"><i class="fas fa-link"></i></a>
</h3>
<p>Debido a que el primer argumento siempre será nuestra data, y en el mapeo de variables los dos primeros atributos siempre corresponden al eje <em>X</em> y al eje <em>Y</em>, podemos reescribir el código del gráfico anterior de forma más concisa.</p>
<p>Para estos parámetros tan comunes (<code>data</code>,<code>x</code>, <code>y</code>), no necesitamos especificar su nombre cada vez.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_peru</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/plot_ex2-1.png" width="672"></div>
</div>
<div id="comparación" class="section level3" number="4.2.4">
<h3>
<span class="header-section-number">4.2.4</span> Comparación<a class="anchor" aria-label="anchor" href="#comparaci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datos_peru</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_peru</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="almacenar-gráfico" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Almacenar gráfico<a class="anchor" aria-label="anchor" href="#almacenar-gr%C3%A1fico"><i class="fas fa-link"></i></a>
</h2>
<p>Los gráficos creados con <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> son un nuevo tipo de objeto. Como tal, puede usarse el operador de asignamiento (<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>) para almacenarlos en nuestro <strong><em>Environment</em></strong>. Por ejemplo, creamos el objeto <code>gráfico</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_peru</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Ahora sólo haría falta agregarle una geometría. Para ello, hacemos uso del operador de adición (<code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>). Mira lo fácil que es cambiar entre un gráfico de líneas, de columnas y de puntos.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-8-1.png" width="672"></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-9-1.png" width="672"></div>
<p>¿Cómo determinar el correcto tipo de gráficos según los datos que tengo?</p>
<p>¿En qué casos debo usar columnas?¿En qué casos debo usar puntos?</p>
</div>
<div id="los-cinco-gráficos-nombrados" class="section level2" number="4.4">
<h2>
<span class="header-section-number">4.4</span> Los cinco gráficos nombrados<a class="anchor" aria-label="anchor" href="#los-cinco-gr%C3%A1ficos-nombrados"><i class="fas fa-link"></i></a>
</h2>
<p>Con el fin de conseguir una explicación simple, nos limitamos a mostrar cinco tipos de gráfico que son de uso común y que además permiten entender los usos de la gramática en su forma básica.</p>
<div id="gráfico-de-barras-o-columnas" class="section level3" number="4.4.1">
<h3>
<span class="header-section-number">4.4.1</span> Gráfico de barras o columnas<a class="anchor" aria-label="anchor" href="#gr%C3%A1fico-de-barras-o-columnas"><i class="fas fa-link"></i></a>
</h3>
<p>El primer tipo de gráfico que veremos es el de barras. Resulta muy útil para mostrar estadísticas de resumen de nuestros datos categóricos. Por ejemplo, podemos ver cuántos países encontramos por continente en las observaciones de <code>gapminder</code> correspondientes al año 2002 y su promedio de expectativa de vida. Podemos obtener esa información usando funciones de <code>dplyr</code>.</p>
<p>Si queremos contar con columnas verticales, mapeamos nuestra variable discreta al eje X y nuestra variable numérica al eje Y.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">paises_por_continente</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>
    recuento <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,
    promedio_exp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;   continent recuento promedio_exp</span>
<span class="co">#&gt;   &lt;fct&gt;        &lt;int&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Africa          52         53.3</span>
<span class="co">#&gt; 2 Americas        25         72.4</span>
<span class="co">#&gt; 3 Asia            33         69.2</span>
<span class="co">#&gt; 4 Europe          30         76.7</span>
<span class="co">#&gt; 5 Oceania          2         79.7</span></code></pre></div>
<p>Con esta información, podemos dibujar nuestro primer gráfico de barras haciendo uso de <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">paises_por_continente</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">recuento</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/geom_col-1.png" width="672"></div>
</div>
<div id="gráfico-de-líneas" class="section level3" number="4.4.2">
<h3>
<span class="header-section-number">4.4.2</span> Gráfico de líneas<a class="anchor" aria-label="anchor" href="#gr%C3%A1fico-de-l%C3%ADneas"><i class="fas fa-link"></i></a>
</h3>
<p>El siguiente tipo de gráfico ya lo conocemos. Consiste en líneas que nos sirven generalmente para analizar la evolución en el tiempo de determinadas variables. Debido a ello, es muy común mapear en el exe <em>X</em> alguna variable de tiempo, y en el eje <em>Y</em> alguna variable continua, que sería nuestra variable de interés.</p>
<p>Con <code>gapminder</code> podemos analizar la evolución del PBI per cápita peruano de 1952 a 2007. Para ello filtraremos sólo las observaciones pertenecientes a Perú. Para generar el gráfico de líneas usamos <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_peru</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/geom_line_1-1.png" width="672"></div>
<p>¿En qué periodo se ve una gran caída? ¿Cuántos años fueron necesarios para recuperar la misma cifra? Este tipo de preguntas son las que un gráfico de líneas nos permite revisar.</p>
</div>
<div id="histogramas" class="section level3" number="4.4.3">
<h3>
<span class="header-section-number">4.4.3</span> Histogramas<a class="anchor" aria-label="anchor" href="#histogramas"><i class="fas fa-link"></i></a>
</h3>
<p>Es posible hacer otro tipo de análisis usando una sola variable. El gráfico de columnas nos permitía ver cómo se distribuyen las observaciones de nuestras variables discretas. Podemos esperar que exista un gráfico que nos muestre la distribución de variables continuas.</p>
<p>Esto lo conseguimos con los histogramas. En lugar de mostrar la frecuencia de observaciones según <em>categorías</em>, nos permiten agrupar los datos por <em>intervalos</em>. Veamos cómo se distribuye el PBI per cápita de todos los países del mundo en el año 2007. Para generar el histograma usamos <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>. Por defecto, <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> divide nuestra data en 30 intervalos.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_2007</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span></code></pre></div>
<p>En este caso, sólo indicaremos la variable del eje X, porque el eje Y se calcula en base a los intervalos automáticos.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with</span>
<span class="co">#&gt; `binwidth`.</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/geom_histogram-1.png" width="672"></div>
<p>Con esto podemos responder alguna preguntas como:</p>
<ul>
<li>¿Cuál es el valor más pequeño?¿Y el más alto?</li>
<li>¿Cuál es el valor “central” o “más típico?”</li>
<li>¿Qué tan dispersos están los valores?</li>
<li>¿Qué valores son muy frecuentes?¿Cuáles son infrecuentes?</li>
</ul>
</div>
<div id="diagramas-de-caja-o-boxplot" class="section level3" number="4.4.4">
<h3>
<span class="header-section-number">4.4.4</span> Diagramas de caja o boxplot<a class="anchor" aria-label="anchor" href="#diagramas-de-caja-o-boxplot"><i class="fas fa-link"></i></a>
</h3>
<p>Otra manera de ver la distribución de nuestros valores es haciendo uso de diagramas de caja o <em>boxplot</em>. En este caso, es más entenderlo si primero hemos visto alguno. Para dibujarlo, usamos <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>.</p>
<p>Para obtener una <em>caja</em> que represente a todo nuestro conjunto de datos, sólo necesitamos especificar el eje X.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/geom_boxplot1-1.png" width="672"></div>
<p>Vemos una especie de “caja” que busca representar nuestros valores. La línea negra remarcada al centro de la caja nos indica dónde encontramos el punto medio de nuestros datos (la mediana). Esta representación nos permite ubicar nuestros datos en cuatro segmentos importantes:</p>
<ol style="list-style-type: decimal">
<li>Todo lo que está “fuera” de la caja en el lado izquierdo representa el primer 25% de nuestros datos, también conocido como el primer cuartil o cuartil inferior. Son los valores más bajos.</li>
<li>Todo lo que está en la primera mitad de la “caja” representa el segundo 25% de nuestros datos, conocido el segundo cuartil.</li>
<li>Todo lo que está en la segunda mitad de la “caja” representa el tercer 25% de nuestros datos, conocido como el tercer cuartil.</li>
<li>Todo lo que está “fuera” de la caja en el lado derecho, representa el cuarto 25% de nuestros datos, también conocido como el cuarto cuartil o cuartil superior. Son los valores más altos.</li>
</ol>
<p>Habrás podido notar que además aparecen algunos puntos dibujados fuera de nuestros cuatro segmentos. Estos representan valores extremos, también conocidos como <em>outliers</em>. Pueden aparecer tanto en el lado más alto como en el más bajo de nuestros datos. Para determinar su existencia se utiliza un cálculo usando el Rango Intercuartil. Si no entiendes esta parte por ahora, no te preocupes, con que entiendas que son valores extremos es suficiente.</p>
<p>Algo muy útil que nos permiten hacer los <em>boxplot</em> es comparar la distribución de nuestros valores entre diferentes categorías. Para ello, podemos mapear una variable discreta al eje Y. Por ejemplo, el PBI per cápita de los cinco continentes.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/geom_boxplot2-1.png" width="672"></div>
<p>De esta manera, podemos ver que incluso los valores más altos de PBI en África no alcanzan a los valores medianos de Europa y Oceanía. También podemos ver que aunque Asia tiene países con valores de PBI per cápita comparables con los más altos de Europa, al menos la mitad de sus países se ubica en los niveles de África.</p>
</div>
<div id="diagrama-de-dispersión-o-puntos" class="section level3" number="4.4.5">
<h3>
<span class="header-section-number">4.4.5</span> Diagrama de dispersión o puntos<a class="anchor" aria-label="anchor" href="#diagrama-de-dispersi%C3%B3n-o-puntos"><i class="fas fa-link"></i></a>
</h3>
<p>Además de ver las características de una variable en particular, ya sea viendo su evolución en el tiempo o su distribución, podemos pensar en cómo analizar la relación <em>entre</em> nuestras variables. Por ejemplo, ¿qué relación existe entre el PBI per cápita y la expectativa de vida? Piensa un poco en esto y trata de responder la siguiente pregunta: ¿Existirá mayor expectativa de vida en países que tienen un PBI per cápita alto?</p>
<p>Para responder a esto podemos hacer uso de un diagrama de dispersión, también conocido como <em>diagrama de puntos</em>. Nos sirve para ver la relación existente entre dos variables continuas, también conocida como <strong>correlación</strong>.</p>
<p>A continuación, analizaremos la relación entre el PBI per cápita y la expectativa de vida de todos los países en el año 2007. Para dibujar nuestro diagrama de puntos, hacemos uso de <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>. Las variables de interés van en cada uno de nuestros ejes. En este caso, como esperamos que el PBI per cápita influya en la epectativa de vida, lo colocamos en el eje <em>X</em>. Cada uno de los puntos de nuestro gráfico corresponde a un país.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/geom_point1-1.png" width="672"></div>
<p>Algo que podemos notar rápidamente es que existen gran cantidad de países con un PBI per cápita bajo, esto hace que haya mucha aglomeración en esa parte del gráfico. Aunque esto nos dificulta un poco el análisis, podemos ir respondiendo la siguiente pregunta: ¿La expectativa de vida en los países con mayor PBI per cápita es alta o baja?</p>
<p>Para ver la distribución en los países con menor PBI per cápita podemos filtrar sólo los valores menores a 10000.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_2007_filtrado</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="va">gdpPercap</span> <span class="op">&lt;</span> <span class="fl">10000</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007_filtrado</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/geom_point2-1.png" width="672"></div>
<p>Nuevamente, podemos ver que los países con mayor PBI per cápita tienen la expectativa de vida más alta. Sin embargo, ahora además podemos ver con mayo claridad que aunque en los países con menor PBI per cápita la expectativa de vida es variada, generalmente se encuentra en los valores más bajos.</p>
</div>
</div>
<div id="personalización-de-las-geometrías" class="section level2" number="4.5">
<h2>
<span class="header-section-number">4.5</span> Personalización de las geometrías<a class="anchor" aria-label="anchor" href="#personalizaci%C3%B3n-de-las-geometr%C3%ADas"><i class="fas fa-link"></i></a>
</h2>
<p>Hasta el momento hemos conocido cómo cambiar en nuestras geometrías los atributos estéticos de posición en los ejes <em>X</em> y <em>Y</em>. Sin embargo, cuando pensamos tradicionalmente en atributos estéticos, hay otro tipo de características que también nos vienen a la mente.</p>
<p>Tres de ellas pueden ser el color, tamaño y forma de las figuras geométricas que utilizamos en nuestros gráficos. Con <code>ggplot2</code> podemos mapear alguna variable de nuestro set de datos a estos atributos.</p>
<div id="color-y-relleno" class="section level3" number="4.5.1">
<h3>
<span class="header-section-number">4.5.1</span> Color y relleno<a class="anchor" aria-label="anchor" href="#color-y-relleno"><i class="fas fa-link"></i></a>
</h3>
<p>Pensemos en un gráfico de barras. Habíamos visto que es posible crearlo usando <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>. Por ejemplo, la cantidad de países en cada continente para el año 2007.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/color1-1.png" width="672"></div>
<p>El gráfico nos permite identificar una columna con cada uno de los continentes, pero para ello es necesario leer las etiquetas en el eje <em>X</em>. Otra manera de saber que estamos refiriéndonos a continentes distintos es haciendo uso del atributo <code>fill</code>, que se refiere al relleno de las barras.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">continent</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/color2-1.png" width="672"></div>
<p>Vemos que además de colorear cada una de nuestras barras, <code>ggplot2</code> automáticamente le agrega una leyenda a nuestro gráfico para saber qué categoría representa cada color mostrado. En un gráfico de barras, esta información ya la presentaban las etiquetas del eje <em>X</em>.</p>
<p>Para poder apreciar cómo el color nos puede apreciar a explotar nuestros datos, agreguémosle color de relleno a un diagrama de puntos. Recordemos que para ello hacemos uso de <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>. Por ejemplo, para ver la relación entre PBI per cápita y esperanza de vida en el año 2007. Haciendo uso del color, podemos ver cómo se posicionan los países según su continente.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/color3-1.png" width="672"></div>
<p>Podemos seguir viendo que existe una relación positiva entre PBI per cápita y expectativa de vida, pero además ahora podemos ver a qué continente pertenecen los países con PBI per cápita más alto y más bajo.</p>
<p>Sin embargo, te habrás dado cuenta que para el código de barras hemos usado el argumento <code>fill</code> pero en el diagrama de puntos hemos usado <code>color</code>.</p>
<p>¿Por qué la diferencia? Tiene que ver con la figura geométrica que estamos utilizando. Por lo general debemos entenderlo de la siguiente manera:</p>
<ul>
<li>
<code>fill</code>: permite modificar el relleno de la figura.</li>
<li>
<code>color</code>: permite modificar los bordes o líneas de la figura.</li>
</ul>
</div>
<div id="tamaño" class="section level3" number="4.5.2">
<h3>
<span class="header-section-number">4.5.2</span> Tamaño<a class="anchor" aria-label="anchor" href="#tama%C3%B1o"><i class="fas fa-link"></i></a>
</h3>
<p>Del mismo, usar el atributo de tamaño nos permite identificar nueva información acerca de nuestros datos. Por ejemplo, podemos ver la población de los países en nuestro diagrama de puntos para hacernos una idea de a quiénes representa. Para ello, usamos el argumento <code>size</code> y lo mapeamos a la variable <code>pop</code>.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, size <span class="op">=</span> <span class="va">pop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/size1-1.png" width="672"></div>
<p>Nuevamente, <code>ggplot2</code> nos proporciona una leyenda automática. Así podemos ver que para el año 2007, los países con los valores de población más extremos, tienen un PBI per cápita bajo. Podemos combinar al mismo tiempo el uso de tamaño con el color para ver también la distribución según continentes.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, size <span class="op">=</span> <span class="va">pop</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/size2-1.png" width="672"></div>
<ul>
<li>¿Qué punto crees que representa a China?</li>
<li>¿Qué punto crees que representa a EEUU?</li>
<li>¿Qué punto crees que representa a Australia?</li>
</ul>
</div>
<div id="forma" class="section level3" number="4.5.3">
<h3>
<span class="header-section-number">4.5.3</span> Forma<a class="anchor" aria-label="anchor" href="#forma"><i class="fas fa-link"></i></a>
</h3>
<p>Debes tener en cuenta que no todo el mundo percibe los colores de la misma manera. En casos como esos, usar una forma distinta para nuestras categorías permite mostrar con mayor claridad las diferencias. Para ello, usamos el atributo <code>shape</code>.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, shape <span class="op">=</span> <span class="va">continent</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/shape1-1.png" width="672"></div>
</div>
</div>
<div id="etiquetas" class="section level2" number="4.6">
<h2>
<span class="header-section-number">4.6</span> Etiquetas<a class="anchor" aria-label="anchor" href="#etiquetas"><i class="fas fa-link"></i></a>
</h2>
<p>Por último, usar etiquetas significativas hará que nuestros gráficos hablen por sí solos. Para ello, agregamos la función <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> a nuestro gráfico. En ella, entre otras cosas, podemos modificar lo siguiente:</p>
<ul>
<li>
<code>title</code>: el título principal de nuestro gráfico</li>
<li>
<code>subtitle</code>: el subtítulo del gráfico</li>
<li>
<code>caption</code>: la nota al pie de nuestro gráfico</li>
<li>
<code>x</code>: la etiqueta del eje <em>X</em>
</li>
<li>
<code>y</code>: la etiqueta del eje <em>Y</em>
</li>
</ul>
<p>Conservamos <code>grafico_puntos</code> para usarlo como ejemplo.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_dispersion</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, shape <span class="op">=</span> <span class="va">continent</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_dispersion</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-13-1.png" width="672"></div>
<div id="usando-labs-para-títulos" class="section level3" number="4.6.1">
<h3>
<span class="header-section-number">4.6.1</span> Usando <code>labs()</code> para títulos<a class="anchor" aria-label="anchor" href="#usando-labs-para-t%C3%ADtulos"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_dispersion</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Relación entre PBI per cápita y expectativa de vida"</span>,
       subtitle <span class="op">=</span> <span class="st">"Los cinco continentes en el año 2007"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/labs1-1.png" width="672"></div>
</div>
<div id="usando-labs-para-los-ejes" class="section level3" number="4.6.2">
<h3>
<span class="header-section-number">4.6.2</span> Usando <code>labs()</code> para los ejes<a class="anchor" aria-label="anchor" href="#usando-labs-para-los-ejes"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_dispersion</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"PBI per cápita"</span>,
       y <span class="op">=</span> <span class="st">"Expectativa de Vida"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/labs2-1.png" width="672"></div>
</div>
<div id="usando-labs-para-caption-y-leyenda" class="section level3" number="4.6.3">
<h3>
<span class="header-section-number">4.6.3</span> Usando <code>labs()</code> para caption y leyenda<a class="anchor" aria-label="anchor" href="#usando-labs-para-caption-y-leyenda"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_dispersion</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Fuente: Proyecto gapminder"</span>,
       color <span class="op">=</span> <span class="st">"Continente"</span>, shape <span class="op">=</span> <span class="st">"Continente"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/labs3-1.png" width="672"></div>
</div>
<div id="combinando-todas-las-etiquetas" class="section level3" number="4.6.4">
<h3>
<span class="header-section-number">4.6.4</span> Combinando todas las etiquetas<a class="anchor" aria-label="anchor" href="#combinando-todas-las-etiquetas"><i class="fas fa-link"></i></a>
</h3>
<p>Podemos juntar todas las etiquetas dentro de una misma llamada a <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code>. De paso, guardamos <code>grafico_final()</code> para usarlo más adelante.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">&lt;-</span> <span class="va">grafico_dispersion</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Relación entre PBI per cápita y expectativa de vida"</span>,
       subtitle <span class="op">=</span> <span class="st">"Los cinco continentes en el año 2007"</span>,
       caption <span class="op">=</span> <span class="st">"Fuente: Proyecto gapminder"</span>,
       x <span class="op">=</span> <span class="st">"PBI per cápita"</span>,
       y <span class="op">=</span> <span class="st">"Expectativa de Vida"</span>,
       color <span class="op">=</span> <span class="st">"Continente"</span>,
       shape <span class="op">=</span> <span class="st">"Continente"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-14-1.png" width="672"></div>
</div>
</div>
<div id="temas-theme" class="section level2" number="4.7">
<h2>
<span class="header-section-number">4.7</span> Temas (theme)<a class="anchor" aria-label="anchor" href="#temas-theme"><i class="fas fa-link"></i></a>
</h2>
<p>Es probable que además de cambiar los colores, forma y etiquetas de un gráfico, busques modificar otros elementos estéticos que no corresponden a datos.</p>
<p>Lamentablemente, escapa de la finalidad de esta sesión llegar a enseñarte esto. Sin embargo, <code>ggplot2</code> viene con temas predefinidos que te pueden permitir ahorrarte el trabajo de hacerlos por ti mismo.</p>
<p>A continuación, algunos ejemplos de estos modelos aplicados a <code>grafico_final</code>.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-15-1.png" width="672"></div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-16-1.png" width="672"></div>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-17-1.png" width="672"></div>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-18-1.png" width="672"></div>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-19-1.png" width="672"></div>
<div id="ggthemes" class="section level3" number="4.7.1">
<h3>
<span class="header-section-number">4.7.1</span> <code>ggthemes</code><a class="anchor" aria-label="anchor" href="#ggthemes"><i class="fas fa-link"></i></a>
</h3>
<p>También existen otros paquetes que incluyen temas para gráficos. Uno de los más conocidos es <code>ggthemes</code>.</p>
<p>Para instalarlo.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"ggthemes"</span><span class="op">)</span></code></pre></div>
<p>Una vez instalado, no olvides llamarlo con <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> para usar sus temas.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_base.html">theme_base</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-22-1.png" width="672"></div>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_calc.html">theme_calc</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-23-1.png" width="672"></div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_clean.html">theme_clean</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-24-1.png" width="672"></div>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-25-1.png" width="672"></div>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_wsj.html">theme_wsj</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-26-1.png" width="672"></div>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grafico_final</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_stata.html">theme_stata</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="04-gramatica-graficos_files/figure-html/unnamed-chunk-27-1.png" width="672"></div>
</div>
</div>
<div id="más-allá-de-lo-evidente" class="section level2" number="4.8">
<h2>
<span class="header-section-number">4.8</span> Más allá de lo evidente<a class="anchor" aria-label="anchor" href="#m%C3%A1s-all%C3%A1-de-lo-evidente"><i class="fas fa-link"></i></a>
</h2>
<p>Si deseas conocer más sobre <code>ggplot2</code> puedes revisar su libro oficial y su “Cookbook” oficial.</p>
<ul>
<li>
<a href="https://ggplot2-book.org/index.html">Libro</a>: Teoría y ejemplos claros</li>
<li>
<a href="https://r-graphics.org/">Cookbook</a>: Ejemplos extensivos</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="repaso-de-conceptos-estad%C3%ADsticos.html"><span class="header-section-number">3</span> Repaso de conceptos estadísticos</a></div>
<div class="next"><a href="importaci%C3%B3n-de-datos.html"><span class="header-section-number">5</span> Importación de datos</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#gr%C3%A1ficos"><span class="header-section-number">4</span> Gráficos</a></li>
<li><a class="nav-link" href="#conjunto-de-datos-de-ejemplo"><span class="header-section-number">4.1</span> Conjunto de datos de ejemplo</a></li>
<li>
<a class="nav-link" href="#la-gram%C3%A1tica"><span class="header-section-number">4.2</span> La gramática</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#componentes-de-la-gram%C3%A1tica"><span class="header-section-number">4.2.1</span> Componentes de la gramática</a></li>
<li><a class="nav-link" href="#un-breve-ejemplo"><span class="header-section-number">4.2.2</span> Un breve ejemplo</a></li>
<li><a class="nav-link" href="#ggplot-conciso"><span class="header-section-number">4.2.3</span> ggplot conciso</a></li>
<li><a class="nav-link" href="#comparaci%C3%B3n"><span class="header-section-number">4.2.4</span> Comparación</a></li>
</ul>
</li>
<li><a class="nav-link" href="#almacenar-gr%C3%A1fico"><span class="header-section-number">4.3</span> Almacenar gráfico</a></li>
<li>
<a class="nav-link" href="#los-cinco-gr%C3%A1ficos-nombrados"><span class="header-section-number">4.4</span> Los cinco gráficos nombrados</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#gr%C3%A1fico-de-barras-o-columnas"><span class="header-section-number">4.4.1</span> Gráfico de barras o columnas</a></li>
<li><a class="nav-link" href="#gr%C3%A1fico-de-l%C3%ADneas"><span class="header-section-number">4.4.2</span> Gráfico de líneas</a></li>
<li><a class="nav-link" href="#histogramas"><span class="header-section-number">4.4.3</span> Histogramas</a></li>
<li><a class="nav-link" href="#diagramas-de-caja-o-boxplot"><span class="header-section-number">4.4.4</span> Diagramas de caja o boxplot</a></li>
<li><a class="nav-link" href="#diagrama-de-dispersi%C3%B3n-o-puntos"><span class="header-section-number">4.4.5</span> Diagrama de dispersión o puntos</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#personalizaci%C3%B3n-de-las-geometr%C3%ADas"><span class="header-section-number">4.5</span> Personalización de las geometrías</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#color-y-relleno"><span class="header-section-number">4.5.1</span> Color y relleno</a></li>
<li><a class="nav-link" href="#tama%C3%B1o"><span class="header-section-number">4.5.2</span> Tamaño</a></li>
<li><a class="nav-link" href="#forma"><span class="header-section-number">4.5.3</span> Forma</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#etiquetas"><span class="header-section-number">4.6</span> Etiquetas</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#usando-labs-para-t%C3%ADtulos"><span class="header-section-number">4.6.1</span> Usando labs() para títulos</a></li>
<li><a class="nav-link" href="#usando-labs-para-los-ejes"><span class="header-section-number">4.6.2</span> Usando labs() para los ejes</a></li>
<li><a class="nav-link" href="#usando-labs-para-caption-y-leyenda"><span class="header-section-number">4.6.3</span> Usando labs() para caption y leyenda</a></li>
<li><a class="nav-link" href="#combinando-todas-las-etiquetas"><span class="header-section-number">4.6.4</span> Combinando todas las etiquetas</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#temas-theme"><span class="header-section-number">4.7</span> Temas (theme)</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#ggthemes"><span class="header-section-number">4.7.1</span> ggthemes</a></li></ul>
</li>
<li><a class="nav-link" href="#m%C3%A1s-all%C3%A1-de-lo-evidente"><span class="header-section-number">4.8</span> Más allá de lo evidente</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/04-gramatica-graficos.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/04-gramatica-graficos.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Cookbook de análisis de datos básico</strong>" was written by Samuel Calderon. It was last built on 2021-11-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
